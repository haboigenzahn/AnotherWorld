<!DOCTYPE html>
<html>
  <head>
    <title>Hello, WebVR! - A-Frame</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.0.2/dist/aframe-extras.min.js"></script>
    <!--<script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.min.js"></script>-->
    <script>
      AFRAME.registerComponent('handle-events', {
        init: function () {
          var sceneEl = document.querySelector('a-scene');
          var el = sceneEl.querySelector('#duck1');
          
          el.addEventListener('mouseenter', function () {
            el.setAttribute('color', '#FA7800');  
          });
          el.addEventListener('mouseleave', function () {
            el.setAttribute('color', 'yellow');  
          });
          el.addEventListener('click', function () {
            el.setAttribute('radius', '0.25');
            //update score
          });
        } 
      });
      
      AFRAME.registerSystem('gamestate', {
  // score ??
  schema: {
    score: 0
  },

  init: function () {
    var initialState = this.initialState;
    var sceneEl = this.el;
    var state = this.data;

    if (!initialState) { initialState = state; }

    sceneEl.emit('gamestateinitialized', {state: initialState});

    /**
     * Application-specific code goes under here! Handlers to transition state.
     */
    registerHandler('increment', function (newState, evt) {
      newState.value++;
      return newState;
    });
  }
});
      
    </script>  
  </head>
  <body>
    <a-scene>
      <a-sky color="#ECECEC"></a-sky>
      <a-plane id="ground" position="0 -0.1 0" rotation="-90 0 0" width="60" height="60" color="#52BE80"></a-plane>
      
      <a-entity position="0 1.5 0">
        <a-camera><a-cursor></a-cursor></a-camera>
      </a-entity>
      
      <a-sphere id="duck1" color="yellow" position="0.4 0.3 -7.3" radius="0.2" handle-events>
        <a-animation attribute="position" direction="alternate" dur="1500" repeat="indefinite" to="0.4 0.4 -7.3"></a-animation>
      </a-sphere>
      <a-sphere color="#F1C40F" position="-1 0.3 -6" radius="0.2">
        <a-animation attribute="position" direction="alternate" dur="1500" repeat="indefinite" to="-1 0.4 -6"></a-animation>
      </a-sphere>
      <a-sphere color="#FFA000" position="0.7 0.3 -5.4" radius="0.2">
        <a-animation attribute="position" direction="alternate" dur="1500" repeat="indefinite" to="0.7 0.4 -5.4"></a-animation>
      </a-sphere>
         
    <a-entity id="pond" position ="0 0 -7">
      <a-torus color="#FF69B4" radius="3" rotation="90 0 0" metalness="0.6"></a-torus>
      <a-torus color="yellow" radius="3" rotation="90 0 0" metalness="0.6" position="0 0.7 0"></a-torus>
      <a-ocean width="5.8" depth="3" position="0 0.3 0" amplitude="0.05" amplitude-variance="0.05" speed="0.1"></a-ocean>
      <a-circle src="#platform" radius="3" color="#7AD2F7" rotation="-90 0 0"></a-circle>
    </a-entity>
      
    <a-entity id="score" position="-2.5 1 -3.5" rotation="0 30 0" text="width: 4; align: center; color: black; value: Score \n 000">
      <!--<a-animation attribute="rotation" to="0 405 0"  easing="linear" fill="both" dur="800" begin="updateScore" > </a-animation>-->
      <a-box color="#fed6fa" position ="0 0 -0.05" scale="0.8 0.6 0.1"> </a-box>
      <a-box color="#fed6fa" position ="0 -0.7 -0.05" scale="0.1 1 0.1"> </a-box>
    </a-entity>
      
    </a-scene>
  </body>
</html>